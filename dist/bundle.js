!function(n){var e={};function t(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return n[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var a in n)t.d(r,a,function(e){return n[e]}.bind(null,a));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="/dist/",t(t.s=0)}([function(n,e,t){"use strict";t.r(e);var r=function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.name=e;for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.zones=r};function a(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var o=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.data=e}var e,t,r;return e=n,(t=[{key:"getStationByName",value:function(n){var e=this.data[n];return e||null}}])&&a(e.prototype,t),r&&a(e,r),n}();o.testFactory=function(){return new o({Holborn:new r("Holborn",1),"Earl's Court":new r("Earl's Court",1,2),Wimbledon:new r("Wimbledon",3),Hammersmith:new r("Hammersmith",2)})};var i=2.5,u=2,l=2,c=2.25,s=1.8,f=3.2,p=1,y=2;function h(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var v=function(){function n(e,t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.id=e,this.balance=t,this.inTrip=!1}var e,t,r;return e=n,(t=[{key:"discountTrip",value:function(n){if(!(this.balance>=n))throw new Error("Not enought balance to start this trip");this.balance-=n}},{key:"refundBalance",value:function(n){this.balance+=n}},{key:"beginTrip",value:function(n){this.discountTrip(n.transportType===y?f:s),this.inTrip=n.transportType===y}},{key:"endTrip",value:function(n){var e=f-n.fare;this.inTrip&&(this.refundBalance(e),this.inTrip=!1)}}])&&h(e.prototype,t),r&&h(e,r),n}();function d(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var b=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.data=e}var e,t,r;return e=n,(t=[{key:"getUserById",value:function(n){var e=this.data[n];return e||(alert("User not found"),null)}},{key:"getAllUsers",value:function(){var n=this;return Object.keys(this.data).map(function(e){return n.data[e]})}}])&&d(e.prototype,t),r&&d(e,r),n}();b.testFactory=function(){return new b({245432:new v("245432",30),985768:new v("985768",0),"096573":new v("096573",3.2)})};var m=function n(e,t,r,a){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.transportType=e,this.origin=t,this.destination=r,this.fare=a};function w(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var g,T=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.stationRepository=e}var e,t,r;return e=n,(t=[{key:"calculateFare",value:function(n,e){var t,r=this.stationRepository.getStationByName(n),a=this.stationRepository.getStationByName(e);if(null===r)t=p;else{if(null===a)throw new Error("You can not travel from the TUBE to a BUS station");t=y}if(t===p)return new m(t,r,a,s);var o=this.tripInZoneOne(r,a),f=this.tripInSameZone(r,a);return new m(t,r,a,o&&f?i:!o&&f?u:o&&!f?l:c)}},{key:"tripInZoneOne",value:function(n,e){return n.zones.includes(1)||e.zones.includes(1)}},{key:"tripInSameZone",value:function(n,e){return n.zones.some(function(n){return e.zones.includes(n)})}},{key:"createStartingTrip",value:function(n){var e=this.stationRepository.getStationByName(n);return e?new m(y,e,null,null):new m(p,null,null,null)}}])&&w(e.prototype,t),r&&w(e,r),n}(),k=b.testFactory(),E=new T(o.testFactory()),S=k.getAllUsers(),j=document.getElementById("user-dropdown"),O=document.getElementById("current-balance"),B=document.querySelectorAll(".js-take-trip");j.innerHTML=S.map(function(n){return'<option value="'.concat(n.id,'">').concat(n.id,"</option>")}).join(),j.addEventListener("change",function(n){var e=n.target.value;g=k.getUserById(e),O.innerHTML=g.balance}),B.forEach(function(n){n.addEventListener("click",function(n){var e=n.target.id;switch(console.log(e),e){case"1":H();break;case"2":P();break;case"3":I()}})});var C=function(n,e){return function(){console.log(n,e);var t=E.createStartingTrip(n),r=E.calculateFare(n,e);g.beginTrip(t),g.endTrip(r),O.innerHTML=g.balance}},H=C("Holborn","Earl's Court"),P=C("328 bus from Earl's Court","Chelsea"),I=C("Earl's Court","Hammersmith")}]);